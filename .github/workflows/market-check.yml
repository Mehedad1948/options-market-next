name: Taleb Market Scanner (Iran Hours)

on:
  schedule:
    # Runs at minute 0 and 30 past hour 5, 6, 7, 8, 9, 10, and 11 
    # Only on Sunday(0) through Wednesday(3) and Saturday(6)
    # UTC Times: 05:00, 05:30 ... 11:30
    # Iran Times: ~08:30 ... ~15:00
    - cron: '0,30 5-11 * * 0-3,6'
  
  # Allows you to click a button in GitHub Actions tab to trigger manually
  workflow_dispatch:

jobs:
  cron-job:
    runs-on: ubuntu-latest
    steps:
      - name: Call Taleb API Endpoint
        run: |
          echo "Triggering Market Check at ${{ secrets.YOUR_SITE_URL }}..."
          
          # Send GET request with Authorization header
          curl -X GET "${{ secrets.YOUR_SITE_URL }}/api/check-market" \
          -H "Authorization: Bearer ${{ secrets.CRON_SECRET }}" \
          --fail \
          --verbose
